<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rezepte-Challenge Formular</title>
  <style>
    body { font-family: sans-serif; background: #f3f4f6; margin: 0; padding: 2rem; }
    .container { background: #fff; padding: 2rem; border-radius: 16px; max-width: 900px; margin: 0 auto; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #111827; }
    label { font-weight: bold; margin-top: 1rem; display: block; }
    input, textarea, select { width: 100%; padding: 0.5rem; margin-top: 0.25rem; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
    .table-wrapper { width: 100%; overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; min-width: 600px; }
    th, td { border: 1px solid #e5e7eb; padding: 0.5rem; text-align: left; }
    th { background-color: #f9fafb; }
    button { margin-top: 2rem; background-color: #2563eb; color: #fff; padding: 0.75rem; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; width: 100%; }
    button:hover { background-color: #1e40af; }
    .note { font-size: 0.85rem; color: #555; margin-top: 1rem; }
  </style>
</head>
<body>
  <div class="container">
    <form id="rezeptForm" action="https://formspree.io/f/mjkredbb" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="_redirect" value="https://rezeptaktion.github.io/rezeptaktion/danke.html">

      <label for="standort">Lieblingsstandort</label>
      <select id="standort" name="Lieblingsstandort" required>
        <option value="">Bitte auswählen</option>
        <option>Berlin</option>
        <option>MUE03</option>
        <option>Potsdam</option>
        <option>Ratingen</option>
        <option>Rot04</option>
        <option>St. Ingbert</option>
        <option>WDF03</option>
        <option>WDF08</option>
        <option>WDF13</option>
        <option>WDF20</option>
      </select>

      <label for="rezeptname">Name des Rezepts</label>
      <input type="text" id="rezeptname" name="Rezeptname" required>

      <label for="zeit">Zubereitungszeit (in Minuten)</label>
      <input type="number" id="zeit" name="Zubereitungszeit" required>

      <label for="portionen">Anzahl Portionen</label>
      <input type="number" id="portionen" name="AnzahlPortionen" required>

      <label>Hauptzutaten</label>
      <div class="table-wrapper">
        <table id="zutatenTabelle">
          <thead>
            <tr>
              <th>Zutat</th>
              <th>Menge (roh)(g)</th>
              <th>Zubereitungsart</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="text" name="Zutat_1" oninput="addRowIfNeeded(this)"></td>
              <td><input type="number" name="Menge_1" min="0"></td>
              <td><input type="text" name="Zubereitungsart_1"></td>
            </tr>
          </tbody>
        </table>
      </div>

      <label for="zutaten">Ergänzende Zutaten (z. B. Gewürze, Kräuter, Garnitur)</label>
      <textarea id="zutaten" name="Ergänzende_Zutaten" rows="3"></textarea>

      <label for="zubereitung">Zubereitungsart in Stichpunkten (Optional)</label>
      <textarea id="zubereitung" name="Zubereitungsschritte" rows="5"></textarea>

      <label for="bild">Bild hochladen (optional)</label>
      <input type="file" id="bild" name="Rezeptbild" accept="image/*">

      <label for="name">SAP Mitarbeiter-ID</label>
      <input type="text" id="name" name="MitarbeiterID" required>

      <div class="note">
        Mit dem Absenden erkläre ich mich damit einverstanden, dass meine Angaben zur Bearbeitung der Aktion gespeichert und per E-Mail übermittelt werden.
      </div>

      <button type="submit">Rezept absenden</button>
    </form>
  </div>

  <script>
    let zeilenIndex = 1;

    function addRowIfNeeded(input) {
      const tr = input.closest('tr');
      const tabelle = document.getElementById('zutatenTabelle').getElementsByTagName('tbody')[0];
      const letzteZeile = tabelle.lastElementChild;

      if (tr === letzteZeile && input.value.trim() !== '') {
        zeilenIndex++;
        const neueZeile = document.createElement('tr');
        neueZeile.innerHTML = `
          <td><input type="text" name="Zutat_${zeilenIndex}" oninput="addRowIfNeeded(this)"></td>
          <td><input type="number" name="Menge_${zeilenIndex}" min="0"></td>
          <td><input type="text" name="Zubereitungsart_${zeilenIndex}"></td>
        `;
        tabelle.appendChild(neueZeile);
      }
    }

    document.getElementById('rezeptForm').addEventListener('submit', function (e) {
      const inputs = document.querySelectorAll('#zutatenTabelle tbody tr:last-child input');
      const allEmpty = Array.from(inputs).every(input => input.value.trim() === '');
      if (allEmpty) {
        document.querySelector('#zutatenTabelle tbody').lastElementChild.remove();
      }
    });
  </script>
</body>
</html>
